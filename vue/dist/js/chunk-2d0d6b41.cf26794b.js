(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6b41"],{"744b":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{margin:"70px"}},[i("el-table",{attrs:{data:e.tableData,border:"",size:"medium"}},[i("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID"}}),i("el-table-column",{attrs:{fixed:"",prop:"username",label:"用户名"}}),i("el-table-column",{attrs:{prop:"real_name",label:"真实姓名"}}),i("el-table-column",{attrs:{label:"上次登录"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time"}),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("formatDate")(t.row.last_login)))])]}}])}),i("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),i("el-table-column",{attrs:{prop:"admin_type",label:"用户类型"},scopedSlots:e._u([{key:"default",fn:function(t){return["Regular User"===t.row.admin_type?i("div",[i("span",{staticStyle:{color:"green"}},[e._v("学生")])]):"Admin"===t.row.admin_type?i("div",[i("span",{staticStyle:{color:"blue"}},[e._v("教师")])]):i("div",[i("span",{staticStyle:{color:"red"}},[e._v("超级管理员")])])]}}])}),i("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.dialogVisible2=!0,e.user=t.row}}},[e._v("编辑")]),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.dialogVisible=!0,e.user=t.row,e.userid=t.row.id}}},[e._v("删除\n        ")])]}}])})],1),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40,80,160],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),i("el-dialog",{attrs:{title:"用户操作",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("确定删除该用户？删除教师，该老师将需要重新注册，申请~")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.delete_user()}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogVisible2},on:{"update:visible":function(t){e.dialogVisible2=t}}},[i("el-form",{attrs:{model:e.user}},[i("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[i("el-input",{model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),i("el-form-item",{attrs:{label:"邮箱","label-width":e.formLabelWidth}},[i("el-input",{model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),i("el-form-item",{attrs:{label:"禁用","label-width":e.formLabelWidth}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.user.is_disabled,callback:function(t){e.$set(e.user,"is_disabled",t)},expression:"user.is_disabled"}})],1),i("el-form-item",{attrs:{label:"真实姓名","label-width":e.formLabelWidth}},[i("el-input",{staticStyle:{height:"200px",width:"100%"},model:{value:e.user.real_name,callback:function(t){e.$set(e.user,"real_name",t)},expression:"user.real_name"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.show_editor2=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.alerter_user()}}},[e._v("确 定")])],1)],1)],1)},a=[],s={beforeMount:function(){var e=this;this.$axios.user_profile().then((function(t){e.user_profile=t["data"],e.$root.user_profile=e.user_profile})),this.selfLog("获取用户列表"),this.obtain_users()},data:function(){return{formLabelWidth:"120px",userid:-1,user:{},dialogVisible:!1,dialogVisible2:!1,currentPage:1,total:0,user_profile:null,offset:0,limit:8,tableData:[]}},methods:{handleSizeChange:function(e){this.limit=e,this.obtain_users()},handleCurrentChange:function(e){this.currentPage=e,this.offset=(this.currentPage-1)*this.limit,this.obtain_users()},obtain_users:function(){var e=this;this.$axios.obtain_users(this.offset,this.limit).then((function(t){e.selfLog(t),e.tableData=t.data.results,e.total=t.data.total}))},delete_user:function(){var e=this,t={userId:this.user.id,stunum:this.user.username};this.selfLog(t),this.$axios.delete_user(this.userid).then((function(i){null===i.error&&e.$axios.deleteUsr(t).then((function(t){e.$message({message:"用户删除成功",type:"success"}),e.dialogVisible=!1,e.obtain_users()}))}))},alerter_user:function(){var e=this,t=this.user,i={admin_type:t.admin_type,create_time:t.create_time,email:t.email,id:t.id,is_disabled:t.is_disabled,open_api:!1,problem_permission:"None",real_name:t.real_name,real_tfa:!1,two_factor_auth:!1,username:t.username};this.$axios.alerter_user(i).then((function(t){e.selfLog(t),null===t.error&&(e.$message({message:"用户修改成功",type:"success"}),e.dialogVisible2=!1,e.obtain_users())}))}}},r=s,o=i("2877"),n=Object(o["a"])(r,l,a,!1,null,null,null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0d6b41.cf26794b.js.map