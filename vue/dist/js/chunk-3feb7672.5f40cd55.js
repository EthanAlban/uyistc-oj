(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3feb7672"],{"248e":function(e,r,t){},cd14:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"main"}},[t("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.user_profile,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"string","http-request":e.uploadAvatar,multiple:""}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("\n          将文件拖到此处，或\n          "),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1),t("el-form-item",{attrs:{label:"专业",prop:"major"}},[t("el-input",{model:{value:e.user_profile.Major,callback:function(r){e.$set(e.user_profile,"Major",r)},expression:"user_profile.Major"}})],1),t("el-form-item",{attrs:{label:"github地址",prop:"github"}},[t("el-input",{model:{value:e.user_profile.Gitaddr,callback:function(r){e.$set(e.user_profile,"Gitaddr",r)},expression:"user_profile.Gitaddr"}})],1),t("el-form-item",{attrs:{label:"博客地址",prop:"blog"}},[t("el-input",{model:{value:e.user_profile.Blogaddr,callback:function(r){e.$set(e.user_profile,"Blogaddr",r)},expression:"user_profile.Blogaddr"}})],1),t("el-form-item",{attrs:{label:"个性签名",prop:"mood"}},[t("el-input",{model:{value:e.user_profile.Signature,callback:function(r){e.$set(e.user_profile,"Signature",r)},expression:"user_profile.Signature"}})],1)],1),t("el-button",{staticClass:"editButton",attrs:{type:"primary"},on:{click:e.update_profile}},[e._v("确认")])],1)},a=[],o={name:"updateInfo",beforeMount:function(){var e=this;null===this.user_profile&&this.$user_axios.user_profile().then((function(r){e.selfLog(r),e.user_profile=r["data"]}))},data:function(){var e=function(e){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(e)},r=function(r,t,s){t&&(e(t)||s(new Error("网址格式错误")))};return{user_profile:this.$root.user_profile,uploadAction:this.$OJIP+"/api/upload_avatar",rules:{blog:[{validator:r,trigger:"blur"}],github:[{validator:r,trigger:"blur"}]}}},methods:{update_profile:function(){var e=this,r=this.user_profile;r.language="简体中文",this.$axios.updateInfo(r).then((function(r){null===r["error"]?(e.$root.user_profile=r["data"],e.user_profile=r["data"],e.$message({message:"更新成功",type:"success"})):r[!1]?e.$message.error("博客地址不正确，更新失败~"):e.$message.error("更新失败~"),e.resetForm()}))},resetForm:function(){this.$refs["ruleForm"].resetFields()},uploadAvatar:function(e){var r=this,t=new FormData;t.append("image",e.file),this.$axios.uploadAvatar(t).then((function(e){if("Succeeded"===e["data"]){r.$axios.user_profile().then((function(e){r.selfLog(e),r.user_profile=e["data"];r.user_profile.avatar})),r.$message({message:"头像更新成功",type:"success"});var t=new Date,s={userId:r.user_profile.id,msg:t.toLocaleString()+":修改头像",type:1};r.$axios.send_sys_info(s)}else r.$message.error("头像更新失败~")}))}}},i=o,l=(t("f5c6"),t("2877")),u=Object(l["a"])(i,s,a,!1,null,"ff558b08",null);r["default"]=u.exports},f5c6:function(e,r,t){"use strict";t("248e")}}]);
//# sourceMappingURL=chunk-3feb7672.5f40cd55.js.map