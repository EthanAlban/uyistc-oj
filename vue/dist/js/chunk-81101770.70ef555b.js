(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81101770"],{"37c8":function(t,e,n){e.f=n("2b4c")},"3a4a":function(t,e,n){"use strict";n("f3a3")},"3a72":function(t,e,n){var i=n("7726"),o=n("8378"),r=n("2d00"),a=n("37c8"),s=n("86cc").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},6015:function(t,e,n){"use strict";n("8c84")},"7bbc":function(t,e,n){var i=n("6821"),o=n("9093").f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==r.call(t)?s(t):o(i(t))}},"83ba":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("示例"+t._s(t.post.id))]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.$emit("delete",t.post.id)}}},[t._v("删除")])],1),n("div",{staticClass:"sampleBox"},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"样例输入"},model:{value:t.post.input,callback:function(e){t.$set(t.post,"input",e)},expression:"post.input"}}),n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"样例输出"},model:{value:t.post.output,callback:function(e){t.$set(t.post,"output",e)},expression:"post.output"}})],1)])],1)},o=[],r={name:"Sample",props:["post"],data:function(){return{}},methods:{},computed:{}},a=r,s=(n("3a4a"),n("2877")),l=Object(s["a"])(a,i,o,!1,null,"6939d10e",null);e["a"]=l.exports},"8a81":function(t,e,n){"use strict";var i=n("7726"),o=n("69a8"),r=n("9e1e"),a=n("5ca1"),s=n("2aba"),l=n("67ab").KEY,u=n("79e5"),c=n("5537"),f=n("7f20"),p=n("ca5a"),m=n("2b4c"),d=n("37c8"),h=n("3a72"),b=n("d4c0"),g=n("1169"),v=n("cb7c"),_=n("d3f4"),y=n("4bf8"),w=n("6821"),x=n("6a99"),S=n("4630"),C=n("2aeb"),k=n("7bbc"),$=n("11e9"),O=n("2621"),L=n("86cc"),j=n("0d58"),I=$.f,T=L.f,V=k.f,z=i.Symbol,P=i.JSON,F=P&&P.stringify,D="prototype",E=m("_hidden"),q=m("toPrimitive"),A={}.propertyIsEnumerable,J=c("symbol-registry"),N=c("symbols"),R=c("op-symbols"),B=Object[D],M="function"==typeof z&&!!O.f,H=i.QObject,Q=!H||!H[D]||!H[D].findChild,U=r&&u((function(){return 7!=C(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=I(B,e);i&&delete B[e],T(t,e,n),i&&t!==B&&T(B,e,i)}:T,G=function(t){var e=N[t]=C(z[D]);return e._k=t,e},W=M&&"symbol"==typeof z.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof z},K=function(t,e,n){return t===B&&K(R,e,n),v(t),e=x(e,!0),v(n),o(N,e)?(n.enumerable?(o(t,E)&&t[E][e]&&(t[E][e]=!1),n=C(n,{enumerable:S(0,!1)})):(o(t,E)||T(t,E,S(1,{})),t[E][e]=!0),U(t,e,n)):T(t,e,n)},Y=function(t,e){v(t);var n,i=b(e=w(e)),o=0,r=i.length;while(r>o)K(t,n=i[o++],e[n]);return t},X=function(t,e){return void 0===e?C(t):Y(C(t),e)},Z=function(t){var e=A.call(this,t=x(t,!0));return!(this===B&&o(N,t)&&!o(R,t))&&(!(e||!o(this,t)||!o(N,t)||o(this,E)&&this[E][t])||e)},tt=function(t,e){if(t=w(t),e=x(e,!0),t!==B||!o(N,e)||o(R,e)){var n=I(t,e);return!n||!o(N,e)||o(t,E)&&t[E][e]||(n.enumerable=!0),n}},et=function(t){var e,n=V(w(t)),i=[],r=0;while(n.length>r)o(N,e=n[r++])||e==E||e==l||i.push(e);return i},nt=function(t){var e,n=t===B,i=V(n?R:w(t)),r=[],a=0;while(i.length>a)!o(N,e=i[a++])||n&&!o(B,e)||r.push(N[e]);return r};M||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(R,n),o(this,E)&&o(this[E],t)&&(this[E][t]=!1),U(this,t,S(1,n))};return r&&Q&&U(B,t,{configurable:!0,set:e}),G(t)},s(z[D],"toString",(function(){return this._k})),$.f=tt,L.f=K,n("9093").f=k.f=et,n("52a7").f=Z,O.f=nt,r&&!n("2d00")&&s(B,"propertyIsEnumerable",Z,!0),d.f=function(t){return G(m(t))}),a(a.G+a.W+a.F*!M,{Symbol:z});for(var it="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ot=0;it.length>ot;)m(it[ot++]);for(var rt=j(m.store),at=0;rt.length>at;)h(rt[at++]);a(a.S+a.F*!M,"Symbol",{for:function(t){return o(J,t+="")?J[t]:J[t]=z(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in J)if(J[e]===t)return e},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),a(a.S+a.F*!M,"Object",{create:X,defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var st=u((function(){O.f(1)}));a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return O.f(y(t))}}),P&&a(a.S+a.F*(!M||u((function(){var t=z();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))}))),"JSON",{stringify:function(t){var e,n,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(n=e=i[1],(_(e)||void 0!==t)&&!W(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),i[1]=e,F.apply(P,i)}}),z[D][q]||n("32e9")(z[D],q,z[D].valueOf),f(z,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},"8c84":function(t,e,n){},"98ee":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{staticClass:"createNew",attrs:{type:"primary",round:""},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("创建新题目")]),n("div",{staticClass:"problem_list"},[n("el-table",{attrs:{data:t.tableData,size:"medium"}},[n("el-table-column",{attrs:{label:"题目编号",sortable:"",width:"120",prop:"id"}}),n("el-table-column",{attrs:{label:"编号",width:"120",prop:"_id"}}),n("el-table-column",{attrs:{label:"标题",width:"120",prop:"title"}}),n("el-table-column",{attrs:{label:"创建人",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-s-custom"}),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.created_by.username))])]}}])}),n("el-table-column",{attrs:{label:"标签",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,(function(e,i){return n("el-tag",{key:e,attrs:{type:t.tag_types[i%5],effect:"dark"}},[t._v(t._s(e)+"\n          ")])}))}}])}),n("el-table-column",{attrs:{label:"可见状态",prop:"visible"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){return t.set_problem_visible(e.row)}},model:{value:e.row.visible,callback:function(n){t.$set(e.row,"visible",n)},expression:"scope.row.visible"}})]}}])}),n("el-table-column",{attrs:{label:"创建时间",width:"200",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-time"}),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t._f("formatDate")(e.row.create_time)))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"350","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"success",round:""},on:{click:function(n){return t.edit_problem(e.row.id)}}},[t._v("编辑\n          ")]),n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger",round:""},on:{click:function(n){return t.delete_problem(e.row.id)}}},[t._v("删除\n          ")]),n("el-button",{attrs:{size:"mini",icon:"el-icon-download",type:"primary",round:""},on:{click:function(n){return t.download_test_case(e.row.id)}}},[t._v("下载测试用例")])]}}])})],1),n("el-pagination",{attrs:{"current-page":1,"page-sizes":[5,10,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.totalListLength},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),n("el-dialog",{attrs:{visible:t.dialogFormVisible,"destroy-on-close":""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("p",{staticClass:"formTitle",staticStyle:{fontSize:"20px",marginTop:"-40px"}},[t._v("新建题目")]),n("el-form",{staticStyle:{width:"600px",marginLeft:"-40px"},attrs:{model:t.form,inline:!0}},[n("el-form-item",{attrs:{label:"题目编号"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form._id,callback:function(e){t.$set(t.form,"_id",e)},expression:"form._id"}})],1),n("el-form-item",{attrs:{label:"题目名称"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),n("p",{staticClass:"formTitle"},[t._v("题目描述")]),n("quill-editor",{attrs:{content:t.form.description,options:t.editorOption},on:{change:function(e){return t.onDescriptionChange(e)}}}),n("p",{staticClass:"formTitle"},[t._v("输入描述")]),n("quill-editor",{attrs:{content:t.form.input_description,options:t.editorOption},on:{change:function(e){return t.onInputDescChange(e)}}}),n("p",{staticClass:"formTitle"},[t._v("输出描述")]),n("quill-editor",{attrs:{content:t.form.output_description,options:t.editorOption},on:{change:function(e){return t.onOutDescChange(e)}}}),n("p",{staticClass:"formTitle"},[t._v("提示")]),n("quill-editor",{attrs:{content:t.form.hint,options:t.editorOption},on:{change:function(e){return t.onHintChange(e)}}}),n("el-form",{attrs:{model:t.form,inline:!0}},[n("el-form-item",{attrs:{label:"时间限制(ms)"}},[n("el-input-number",{model:{value:t.form.time_limit,callback:function(e){t.$set(t.form,"time_limit",e)},expression:"form.time_limit"}})],1),n("el-form-item",{attrs:{label:"内存限制(MB)"}},[n("el-input-number",{model:{value:t.form.memory_limit,callback:function(e){t.$set(t.form,"memory_limit",e)},expression:"form.memory_limit"}})],1),n("el-form-item",{attrs:{label:"难度"}},[n("el-select",{attrs:{placeholder:"请选择问题难度"},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[n("el-option",{attrs:{label:"低",value:"Low"}}),n("el-option",{attrs:{label:"中等",value:"Mid"}}),n("el-option",{attrs:{label:"困难",value:"High"}})],1)],1)],1),n("el-form",{attrs:{model:t.form,"label-position":"top"}},[n("el-form-item",{attrs:{label:"问题标签"}},[t._l(t.form.tags,(function(e){return n("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(n){return t.handleClose(e)}}},[t._v("\n          "+t._s(e))])})),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 新标签")])],2),n("el-form-item",{attrs:{label:"问题可使用语言"}},[n("el-checkbox-group",{model:{value:t.form.languages,callback:function(e){t.$set(t.form,"languages",e)},expression:"form.languages"}},[n("el-checkbox",{attrs:{label:"C"}}),n("el-checkbox",{attrs:{label:"C++"}}),n("el-checkbox",{attrs:{label:"Java"}}),n("el-checkbox",{attrs:{label:"Python2"}}),n("el-checkbox",{attrs:{label:"Python3"}}),n("el-checkbox",{attrs:{label:"Golang"}})],1)],1)],1),n("el-divider",[n("i",{staticClass:"el-icon-mobile-phone"})]),t._l(t.sampleList,(function(e){return n("Sample",{key:e.id,staticClass:"sampleBox",attrs:{post:e},on:{delete:t.deleteSample}})})),n("el-button",{staticStyle:{width:"60%"},attrs:{type:"primary"},on:{click:t.addSample}},[n("i",{staticClass:"el-icon-plus"}),t._v("新建样例\n    ")]),n("el-divider",[n("i",{staticClass:"el-icon-mobile-phone"})]),n("el-upload",{staticClass:"upload-demo",attrs:{action:"string",accept:".zip",limit:1,"http-request":t.uploadTestCase,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,multiple:"","on-exceed":t.handleExceed,"file-list":t.fileList}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传测试用例")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[n("a",{attrs:{href:"https://docs.onlinejudge.me/#/onlinejudge/guide/test_case",target:"_blank"}},[t._v("测试用例格式说明")])])],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.add_problem}},[t._v("确 定")])],1)],2)],1)},o=[],r=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("7f7f"),n("96cf"),n("1da1")),a=(n("28a5"),n("ade3")),s=n("83ba"),l=n("bc3a"),u=n.n(l),c=n("2b0e");function f(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function p(t,e){if(t){if("string"===typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}c["default"].prototype.$http=u.a;var d={name:"Question",components:{Sample:s["a"]},beforeCreate:function(){var t=this;this.$axios.user_profile().then((function(e){t.selfLog(e),t.user_profile=e["data"],t.$root.user_profile=t.user_profile,t.user_profile.user.last_login=t.user_profile.user.last_login.substr(0,10),t.user_profile.avatar=t.$OJIP+t.user_profile.avatar,t.selfLog(t.user_profile),t.get_list()}))},data:function(){return Object(a["a"])({user_profile:this.$root.user_profile,editorOption:{},dialogFormVisible:!1,inputVisible:!1,inputValue:"",testcase:[],tag_types:["info","warning","danger","","success"],form:{description:"",difficulty:"",hint:"",input_description:"",io_mode:{io_mode:"Standard IO",input:"input.txt",output:"output.txt"},languages:[],memory_limit:256,output_description:"",rule_type:"ACM",samples:[],test_case_id:"",test_case_score:[],share_submission:!1,source:"",spj:!1,spj_code:"",spj_compile_ok:!1,spj_language:"C",tags:["dp","array","greedy"],template:{},time_limit:1e3,title:"",visible:!0,_id:""},sampleList:[],fileList:[],tableData:[],totalListLength:0,limit:10,offset:0},"user_profile",null)},methods:{set_problem_visible:function(t){var e=this;this.$axios.admin_update_problem(t).then((function(t){e.selfLog(t),e.get_list(),e.$message({message:"修改完成",type:"success"})}))},edit_problem:function(t){this.selfLog("编辑问题"+t)},download_test_case:function(t){var e=this;return new Promise((function(n,i){var o="api/admin/test_case?problem_id="+t;c["default"].prototype.$http.get(o,{responseType:"blob"}).then((function(t){e.selfLog(t);var i=t.headers;if(e.selfLog(i),-1===i["content-type"].indexOf("json")){e.selfLog(i);var o=document.createElement("a");o.href=window.URL.createObjectURL(new window.Blob([t.data],{type:i["content-type"]})),o.download=(i["content-disposition"]||"").split("filename=")[1],document.body.appendChild(o),e.selfLog(o),o.click(),o.remove(),n()}else{e.selfLog("+====================");var r=new window.FileReader;t.data.error?e.$message.error(t.data.error):e.$message.error("Invalid file format"),r.onload=function(t){var n=JSON.parse(t.target.result);n.error?e.$message.error(n.data):e.$message.error("Invalid file format")};var a=new window.Blob([t.data],{type:"application/json"});r.readAsText(a)}})).catch((function(){}))}))},delete_problem:function(t){var e=this;this.$confirm("确定要删除此题目？相关的提交也将被删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.delete_problem(t).then((function(t){null===t.error?(e.get_list(),e.$message({type:"success",message:"删除成功!"})):e.$message({message:t.data,type:"error"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},get_list:function(){var t=this;this.$axios.admin_problem_list(this.limit,this.offset).then((function(e){t.selfLog(e),t.selfLog(t.user_profile),null===e.error?(t.tableData=e.data.results,t.totalListLength=e.data.total):t.$message({message:e.data,type:"error"})}))},add_tags:function(){var t,e=this,n=f(this.form.tags);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.$axios.add_tags(i).then((function(t){null===t.error||e.$message({message:t.error,type:"error"})}))}}catch(o){n.e(o)}finally{n.f()}},add_problem:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.add_tags();case 2:for(e=this.sampleList.length,n=0;n<e;n++)i={input:this.sampleList[n].input,output:this.sampleList[n].output},this.form.samples.push(i);this.form.test_case_id=this.testcase[0].id,o={input_name:this.testcase[0].info[0].input_name,output_name:this.testcase[0].info[0].output_name,score:100},this.form.test_case_score.push(o),this.$axios.admin_add_problem(this.form).then((function(t){null===t.error?(r.dialogFormVisible=!1,r.get_list()):r.$message({message:t.data,type:"error"})}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onDescriptionChange:function(t){t.quill;var e=t.html;t.text;this.form.description=e},onInputDescChange:function(t){t.quill;var e=t.html;t.text;this.form.input_description=e},onOutDescChange:function(t){t.quill;var e=t.html;t.text;this.form.output_description=e},onHintChange:function(t){t.quill;var e=t.html;t.text;this.form.hint=e},uploadTestCase:function(t){var e=this,n=new FormData;n.append("file",t.file),n.append("spj",!1),this.$axios.upload_test_case(n).then((function(t){null===t.error?e.testcase.push(t.data):e.$message({message:t.error,type:"error"})}))},handleRemove:function(t,e){this.selfLog(t,e)},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},deleteSample:function(t){for(var e=this.sampleList.length,n=0;n<e;n++)if(this.sampleList[n].id===t){this.sampleList.splice(n,1);break}},addSample:function(){var t=this.sampleList.length;if(t){var e=this.sampleList[this.sampleList.length-1].id+1,n={id:e,input:"",output:""};this.sampleList.push(n)}else{var i={id:1,input:"",output:""};this.sampleList.push(i)}},handleClose:function(t){this.form.tags.splice(this.form.tags.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;if(this.form.tags.indexOf(t)>-1)return this.inputValue="",void(this.inputVisible=!1);t&&this.form.tags.push(t),this.inputVisible=!1,this.inputValue=""},handleSizeChange:function(t){this.limit=t,this.get_list()},handleCurrentChange:function(t){this.offset=this.limit*(t-1),this.get_list()}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}}},h=d,b=(n("6015"),n("2877")),g=Object(b["a"])(h,i,o,!1,null,"41780269",null);e["default"]=g.exports},ac4d:function(t,e,n){n("3a72")("asyncIterator")},d4c0:function(t,e,n){var i=n("0d58"),o=n("2621"),r=n("52a7");t.exports=function(t){var e=i(t),n=o.f;if(n){var a,s=n(t),l=r.f,u=0;while(s.length>u)l.call(t,a=s[u++])&&e.push(a)}return e}},f3a3:function(t,e,n){}}]);
//# sourceMappingURL=chunk-81101770.70ef555b.js.map