(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7890af2a"],{"01cb":function(t,e,s){},"12c4":function(t,e,s){"use strict";s("e798")},2618:function(t,e,s){},"8c2e":function(t,e,s){},b866:function(t,e,s){},d2e8:function(t,e,s){},e3a6:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main"}},[s("div",{staticClass:"q_desc"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title"},[t._v(t._s(t.problbemDetail.Pid)+". "+t._s(t.problbemDetail.Title))]),s("div",{staticStyle:{display:"flex"}},[s("p",[t._v("难度")]),s("p",{class:{low:"简单"===t.problbemDetailDifficulty,mid:"中等"===t.problbemDetailDifficulty,high:"困难"===t.problbemDetailDifficulty},staticStyle:{marginLeft:"10px"}},[t._v("\n\t\t\t\t\t"+t._s(t.problbemDetailDifficulty)+"\n\t\t\t\t")]),t._l(t.tags,(function(e,i){return s("el-tag",{key:e,staticStyle:{margin:"10px 0 10px 10px"},attrs:{type:t.tag_types[i%5]}},[t._v(t._s(e))])}))],2)]),s("el-divider",[s("i",{staticClass:"el-icon-sunny"})]),s("div",{staticClass:"body"},[s("div",{domProps:{innerHTML:t._s(t.problbemDetail.Content)}}),s("span",{staticStyle:{fontWeight:"bold"}},[t._v("输入描述:")]),s("div",{domProps:{innerHTML:t._s(t.problbemDetail.InputDescription)}}),s("span",{staticStyle:{fontWeight:"bold"}},[t._v("输出描述:")]),s("div",{domProps:{innerHTML:t._s(t.problbemDetail.OutputDescription)}}),s("span",{staticStyle:{fontWeight:"bold"}},[t._v("提示:")]),s("div",{domProps:{innerHTML:t._s(t.problbemDetail.Hint)}}),t._l(t.samples,(function(e){return s("div",{key:e.id},[s("div",[s("p",{staticStyle:{fontWeight:"bold"}},[t._v("示例"+t._s(e.id)+":")]),s("div",{staticClass:"sampleBox"},[s("div",{staticClass:"input"},[t._v("输入:"+t._s(e.input))]),s("div",{staticClass:"output"},[t._v("输出:"+t._s(e.output))])])])])})),s("div",{staticStyle:{marginTop:"20px"}},[s("span",[t._v("通过次数:"+t._s(t.acceptSub))]),s("el-divider",{attrs:{direction:"vertical"}}),s("span",[t._v("提交次数:"+t._s(t.totalSub))]),s("div",{attrs:{id:"echart-pass-rate"}})],1)],2)],1),s("div",{staticClass:"ans_editor"},[s("div",{staticClass:"demo-inline"},[s("p",{staticClass:"title"},[t._v("语言")]),s("el-select",{staticClass:"selectLan",attrs:{placeholder:"请选择"},on:{change:t.changeModel},model:{value:t.language,callback:function(e){t.language=e},expression:"language"}},t._l(t.problbemDetail.languages,(function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})})),1),s("p",{staticClass:"title"},[t._v("主题")]),s("el-select",{staticClass:"selectTheme",attrs:{placeholder:"请选择"},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}},t._l(t.themes,(function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})})),1),s("el-button",{attrs:{type:"primary",round:""},on:{click:t.recoverInit}},[t._v("恢复模板")])],1),s("codemirror",{ref:"cmEditor",staticClass:"codeEditor",attrs:{value:t.code,options:t.cmOptions},on:{input:t.onCmCodeChange}})],1),s("el-button",{staticClass:"submit_fixed",attrs:{type:"success",round:""},on:{click:t.submission}},[t._v("提交")]),s("el-drawer",{directives:[{name:"loading",rawName:"v-loading",value:t.drawer_loading,expression:"drawer_loading"}],staticStyle:{"z-index":"9",width:"80%",marginLeft:"20%"},attrs:{title:"提交结果",visible:t.drawer,"append-to-body":"","destroy-on-close":"",direction:"btt","before-close":t.handleClose,"modal-append-to-body":!1,"element-loading-text":"拼命判题中","element-loading-spinner":"el-icon-loading"},on:{"update:visible":function(e){t.drawer=e}}},["编译错误"===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"danger",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"答案错误"===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"danger",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"正确"===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"success",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"计算超时"===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"超时"===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"内存超过"===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"运行时错误"===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"success",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"传送..."===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"判题中..."===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"服务器响应超时请重试提交..."===t.submission_status?s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t"+t._s(t.submission_status)+"\n\t\t")]):t._e(),"部分正确"===t.submission_status?s("el-tag",{attrs:{type:"warning",effect:"dark"}},[t._v(t._s(t.submission_status))]):t._e(),s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"success",effect:"dark"}},[t._v("\n\t\t\t得分："+t._s(t.score)+"\n\t\t")]),s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t最后测试用例："+t._s(t.LastTestcase)+"\n\t\t")]),s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t正确输出： "+t._s(t.LastDesireOutput)+"\n\t\t")]),s("el-tag",{staticStyle:{marginLeft:"5%"},attrs:{type:"info",effect:"dark"}},[t._v("\n\t\t\t代码输出： "+t._s(t.LastOutput)+"\n\t\t")]),s("br"),s("span",{staticStyle:{color:"red"}},[t._v(t._s(t.err_info))])],1)],1)},a=[],n=(s("456d"),s("96cf"),s("1da1")),o=(s("ac6a"),s("5df3"),s("f400"),s("313e")),r=(s("4ba6"),s("4ff4"),s("db91"),s("01cb"),s("b866"),s("d2e8"),s("7a7a"),s("2618"),s("8c2e"),{name:"problemDetail",mounted:function(){this.getData(),this.setEchart()},data:function(){return{drawer_loading:!1,InitLoadCode:!1,submissionReply:0,tag_types:["info","warning","danger","success"],drawer:!1,problbemDetail:{},acceptSub:0,totalSub:0,statistic_info:[],tags:[],msg:"",samples:[],language:"C",theme:"monokai",themes:["eclipse","idea","material","monokai","tomorrow-night-bright","base16-dark"],code:"",cmOptions:{tabSize:4,mode:"text/x-csrc",theme:"monokai",lineNumbers:!0,line:!0,smartIndent:!0,indentUnit:2},submission_id:"",setInterval_id:"",submission_status:"",err_info:"",score:"",LastTestcase:"",LastDesireOutput:"",LastOutput:"",option:{tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"提交分析",type:"pie",radius:["40%","45%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{position:"outside",show:!0,fontSize:"12",fontWeight:"bold",formatter:"{b}:{c}"},labelLine:{show:!0,length:5},data:[]}]}}},methods:{setEchart:function(){var t,e=document.getElementById("echart-pass-rate"),s=o["a"](e);t={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},color:[],series:[{name:"提交统计",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[]}]},this.option=t,t&&s.setOption(t)},handleClose:function(t){t()},setStasticPanel:function(t){var e=this;this.$problem_axios.GetSubmissionStaticForProblem(t).then((function(t){e.selfLog(t),e.statistic_info=t.data;var s=new Map([["4","运行时错误"],["3","内存超过"],["2","超时"],["1","编译错误"],["0","通过"],["-1","答案错误"],["-2","编译错误"],["-3","未完成判题"]]),i=new Map([["4","#5555ff"],["3","#ff5500"],["2","#ff5500"],["1","#aa0000"],["0","#00b8a9"],["-1","#ff2e63"],["-2","#e84545"],["-3","#550000"]]);for(var a in e.statistic_info){var n={name:s.get(e.statistic_info[a].result),value:e.statistic_info[a].nums};e.option.color.push(i.get(e.statistic_info[a].result)),e.option.series[0].data.push(n)}var r=document.getElementById("echart-pass-rate"),l=o["a"](r);e.option&&l.setOption(e.option)}))},getData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.setStasticPanel(this.$route.params.id),this.$problem_axios.GetAcSubTimes(this.$route.params.id).then((function(t){e.selfLog(t),e.acceptSub=t.data.ac,e.totalSub=t.data.submissions})),t.next=4,this.$problem_axios.ProblemDetailById(this.$route.params.id).then((function(t){e.selfLog("获取问题详情"),e.selfLog(t),204===t.errcode&&(e.$router.push("/404"),e.$message({message:"该问题不存在~",type:"warning"})),e.problbemDetail=t.data.problem,e.problbemDetail["templates"]=t.data.templates,e.InitLoadCode=!0;var s=e.$cookies.get("judge_code"+e.problbemDetail.Pid);null===s?(e.selfLog("无前置代码"),e.code=e.problbemDetail.TemplateC):(e.selfLog("检测到前置代码"),e.code=s);for(var i=[],a=0,n=Object.keys(t.data.templates);a<n.length;a++){var o=n[a];i.push(o)}e.problbemDetail["languages"]=i,e.$problem_axios.GetProblemTagsById(e.problbemDetail.Pid).then((function(t){e.selfLog("-=------=-----------"),e.tags=t.data})),e.setEchart(),e.score=e.problbemDetail.total_score,0===e.problbemDetail.submission_number?e.problbemDetail["pass_rate"]=0:e.problbemDetail["pass_rate"]=parseFloat((e.problbemDetail.AcceptSubmissions/e.problbemDetail.TotalSubmissions*100).toFixed(2))}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeModel:function(t){this.language=t,this.selfLog(t),this.code=this.problbemDetail.templates[t]},onCmCodeChange:function(t){this.code=t,this.$cookies.set("judge_code"+this.problbemDetail.Pid,t),this.selfLog("存储cookie"),this.selfLog(t)},recoverInit:function(){this.selfLog(this.problbemDetail),this.selfLog("当前语言："),this.selfLog(this.language),this.code=this.problbemDetail.templates[this.language]},submission:function(){var t=this;this.err_info="",this.submission_status="传送...",this.drawer=!0;var e={Code:this.code,ProblemId:this.problbemDetail.Pid,Language:this.language};this.selfLog(e),this.$problem_axios.Submission(e).then((function(s){t.selfLog(s),200===s.errcode?(t.drawer_loading=!0,t.$problem_axios.GetAcSubTimes(t.$route.params.id).then((function(e){t.selfLog(e),t.acceptSub=e.data.ac,t.totalSub=e.data.submissions})),t.submission_id=s.data.submissionID,t.getSubmissionDetail(e.ProblemId,t.submission_id)):204===s.errcode?t.$message({message:"提交失败，请先登录",type:"warning"}):t.$message({message:"提交失败，请稍后重试",type:"warning"})}))},getSubmissionDetail:function(t,e){var s=this;this.$problem_axios.IsSubmissionExsit(e).then((function(e){s.selfLog("查询问题存在与否:"),s.selfLog(e),200===e.errcode&&(s.selfLog("启动定时任务"),clearInterval(s.setInterval_id),s.setInterval_id=setInterval((function(){s.$problem_axios.GetSubmissionFinal(s.submission_id).then((function(e){if(s.selfLog(e),200===e.errcode){s.score=e.data.Score,s.LastTestcase=e.data.LastTestcase,s.LastDesireOutput=e.data.LastDesireOutput,s.LastOutput=e.data.LastOutput,s.$problem_axios.GetAcSubTimes(t).then((function(t){s.selfLog(t),s.acceptSub=t.data.ac,s.totalSub=t.data.submissions}));var i=e.data.Result;-3===i?s.submission_status="还没做":-2===i?s.submission_status="编译错误":-1===i?s.submission_status="答案错误":-0===i?s.submission_status="正确":1===i?s.submission_status="计算超时":2===i?s.submission_status="超时":3===i?s.submission_status="内存超过":4===i?s.submission_status="运行时错误":5===i?s.submission_status="系统错误":6===i?s.submission_status="传送...":7===i?s.submission_status="判题中...":8===i&&(s.submission_status="部分正确"),6!==e.data.Result&&7!==e.data.Result&&(s.err_info=e.data.ErrInfo,s.drawer_loading=!1,clearInterval(s.setInterval_id)),s.selfLog("查询结束，清除定时任务"),clearInterval(s.setInterval_id)}else 202===e.errcode||203==e.errcode?(s.submission_status="判题中...",s.selfLog(s.submissionReply),s.submissionReply++,s.submissionReply>20&&(clearInterval(s.setInterval_id),s.$message({message:"更新提交状态失败，请重新提交",type:"warning"}),s.submission_status="服务器响应超时请重试提交...",s.drawer_loading=!1,s.submissionReply=0)):clearInterval(that.setInterval_id)}))}),3e3))}))},sendMsgRequest:function(){}},computed:{codemirror:function(){return this.$refs.cmEditor.codemirror},problbemDetailDifficulty:function(){var t="";switch(this.problbemDetail.Level){case 1:t="简单";break;case 2:t="中等";break;case 3:t="困难";break}return t}},watch:{theme:function(t,e){this.cmOptions.theme=t},language:function(t,e){var s=new Map([["C","text/x-csrc"],["C++","text/x-c++src"],["Golang","text/x-go"],["Java","text/x-java"],["Python2","text/x-python"],["Python3","text/x-python"]]),i=s.get(t);this.cmOptions.mode=i}},beforeDestroy:function(){clearInterval(this.setInterval_id)}}),l=r,u=(s("12c4"),s("2877")),c=Object(u["a"])(l,i,a,!1,null,"e676fe10",null);e["default"]=c.exports},e798:function(t,e,s){},f400:function(t,e,s){"use strict";var i=s("c26b"),a=s("b39a"),n="Map";t.exports=s("e0b8")(n,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=i.getEntry(a(this,n),t);return e&&e.v},set:function(t,e){return i.def(a(this,n),0===t?0:t,e)}},i,!0)}}]);
//# sourceMappingURL=chunk-7890af2a.d7b989aa.js.map