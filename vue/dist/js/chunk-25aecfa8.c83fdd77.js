(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25aecfa8"],{"0228":function(t,e,r){"use strict";r.r(e);var n,a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{class:{message_banner1:t.bg[0],message_banner2:t.bg[1],message_banner3:t.bg[2],message_banner4:t.bg[3]}},[r("div",{staticClass:"message-container"},[r("h1",{staticClass:"message-title"},[t._v("留言板")]),r("dv-decoration-6",{staticStyle:{width:"300px",height:"20px"}}),r("div",{staticClass:"animated fadeInUp message-input-wrapper"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.messageContent,expression:"messageContent"}],staticStyle:{background:"transparent","z-index":"1"},attrs:{placeholder:"说点什么吧"},domProps:{value:t.messageContent},on:{click:function(e){t.show=!0},input:function(e){e.target.composing||(t.messageContent=e.target.value)}}}),r("div",{staticClass:"block"},[r("span",{staticClass:"demonstration"}),r("el-color-picker",{staticStyle:{"border-radius":"15px","z-index":"1"},model:{value:t.color1,callback:function(e){t.color1=e},expression:"color1"}})],1),r("button",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"ml-3 animated bounceInLeft",staticStyle:{"border-radius":"15px","z-index":"1"},on:{click:t.addToList}},[t._v("\n          发送\n        ")])])],1),r("div",{staticClass:"barrage-container"},[r("vue-baberrage",{ref:"babarrage",attrs:{lanesCount:10,messageHeight:100,loop:!1,isShow:!0,barrageList:t.barrageList,maxWordCount:60,hoverLanePause:!0},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{staticStyle:{color:"#000",fontsize:"25px"}},[r("img",{staticStyle:{height:"30px",width:"30px","border-radius":"15px"},attrs:{src:e.item.avatar}}),r("span",{style:e.item.color},[t._v(t._s(e.item.nickname)+":\n              "+t._s(e.item.msg))])])]}}])})],1)])])},i=[],s=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("ade3")),o=(r("7f7f"),r("96cf"),r("1da1"));function c(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function u(t,e){if(t){if("string"===typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var f=(n={beforeMount:function(){this.userDetail();var t=new Date,e=t.getHours();this.selfLog(e),e<10?this.bg[0]=!0:e>=10&&e<14?this.bg[1]=!0:e>=14&&e<19?this.bg[2]=!0:this.bg[3]=!0,(e>=23||e<=4)&&this.$notify.info({title:"夜深",message:"夜深了，奔波路上，疲惫的夜晚，请早早入睡，晚安~"}),this.selfLog(this.bg)},mounted:function(){this.listMessage()},data:{user_profile:null}},Object(s["a"])(n,"data",(function(){return{bg:[!1,!1,!1,!1],color1:"",avatar:"",nickname:"",show:!1,messageContent:"",barrageList:[],page:1,interval_id:-1}})),Object(s["a"])(n,"methods",{addToList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.selfLog("user:"+this.user_profile),null!==this.user_profile){t.next=6;break}return this.$notify({title:"登录",message:"发送弹幕请先登录",type:"warning"}),this.selfLog("未登录"),this.$router.push("/login"),t.abrupt("return",!1);case 6:if(""!==this.messageContent.trim()){t.next=9;break}return this.$message.info("留言不能为空"),t.abrupt("return",!1);case 9:this.selfLog(this.user_profile),e={uid:this.user_profile.id,avatar:this.$OJIP+this.user_profile.avatar,msg:this.messageContent,color:"color:"+this.color1,name:this.user_profile.user.username},this.$axios.send_single_bullet_chat(e).then((function(t){r.selfLog(t),"ok"===t.result?(r.barrageList.unshift({color:"color:"+r.color1,id:-1,avatar:t.chat.avatar,msg:t.chat.msg,time:Math.floor(10*Math.random()+3),nickname:t.chat.name,extraWidth:t.chat.extraWidth}),r.$message.success("新增留言成功"),r.selfLog(t.chat)):r.$message.error("留言失败")}));case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),listMessage:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e={page:this.page,pageSize:30},this.$axios.get_bullet_chats(e).then((function(t){r.selfLog("获取弹幕成功"),r.selfLog(t);var e,n=c(t["list"]);try{for(n.s();!(e=n.n()).done;){var a=e.value;r.barrageList.push({color:a.color,id:a.pk,avatar:a.avatar,msg:a.msg,time:Math.floor(15*Math.random()+3),nickname:a.name,extraWidth:a.extraWidth})}}catch(i){n.e(i)}finally{n.f()}})),this.interval_id=setInterval((function(){var t={page:r.page,pageSize:30};r.$axios.get_bullet_chats(t).then((function(t){r.selfLog(t),r.page++;while(r.barrageList.length>1)r.selfLog(r.barrageList),r.barrageList.shift();var e,n=c(t["list"]);try{for(n.s();!(e=n.n()).done;){var a=e.value;r.barrageList.push({color:a.color,id:a.pk,avatar:a.avatar,msg:a.msg,time:Math.floor(10*Math.random()+2),nickname:a.name,extraWidth:a.extraWidth})}}catch(i){n.e(i)}finally{n.f()}}))}),13500);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUser:function(){this.user=window.sessionStorage.getItem("user"),null!=this.user&&(this.nickname=JSON.parse(this.user).nickname,this.avatar=JSON.parse(this.user).avatar)},userDetail:function(){this.selfLog("页面创建之前获取用户详情：")}}),Object(s["a"])(n,"beforeDestroy",(function(){clearInterval(this.interval_id)})),n),h=f,g=(r("b34e"),r("2877")),p=Object(g["a"])(h,a,i,!1,null,"09200179",null);e["default"]=p.exports},"37c8":function(t,e,r){e.f=r("2b4c")},"3a72":function(t,e,r){var n=r("7726"),a=r("8378"),i=r("2d00"),s=r("37c8"),o=r("86cc").f;t.exports=function(t){var e=a.Symbol||(a.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:s.f(t)})}},"7bbc":function(t,e,r){var n=r("6821"),a=r("9093").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return a(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?o(t):a(n(t))}},"8a81":function(t,e,r){"use strict";var n=r("7726"),a=r("69a8"),i=r("9e1e"),s=r("5ca1"),o=r("2aba"),c=r("67ab").KEY,u=r("79e5"),l=r("5537"),f=r("7f20"),h=r("ca5a"),g=r("2b4c"),p=r("37c8"),m=r("3a72"),b=r("d4c0"),d=r("1169"),v=r("cb7c"),y=r("d3f4"),w=r("4bf8"),S=r("6821"),x=r("6a99"),_=r("4630"),O=r("2aeb"),k=r("7bbc"),L=r("11e9"),C=r("2621"),j=r("86cc"),I=r("0d58"),P=L.f,M=j.f,$=k.f,N=n.Symbol,J=n.JSON,W=J&&J.stringify,A="prototype",E=g("_hidden"),z=g("toPrimitive"),F={}.propertyIsEnumerable,T=l("symbol-registry"),D=l("symbols"),R=l("op-symbols"),U=Object[A],H="function"==typeof N&&!!C.f,G=n.QObject,K=!G||!G[A]||!G[A].findChild,Q=i&&u((function(){return 7!=O(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=P(U,e);n&&delete U[e],M(t,e,r),n&&t!==U&&M(U,e,n)}:M,Y=function(t){var e=D[t]=O(N[A]);return e._k=t,e},q=H&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},B=function(t,e,r){return t===U&&B(R,e,r),v(t),e=x(e,!0),v(r),a(D,e)?(r.enumerable?(a(t,E)&&t[E][e]&&(t[E][e]=!1),r=O(r,{enumerable:_(0,!1)})):(a(t,E)||M(t,E,_(1,{})),t[E][e]=!0),Q(t,e,r)):M(t,e,r)},V=function(t,e){v(t);var r,n=b(e=S(e)),a=0,i=n.length;while(i>a)B(t,r=n[a++],e[r]);return t},X=function(t,e){return void 0===e?O(t):V(O(t),e)},Z=function(t){var e=F.call(this,t=x(t,!0));return!(this===U&&a(D,t)&&!a(R,t))&&(!(e||!a(this,t)||!a(D,t)||a(this,E)&&this[E][t])||e)},tt=function(t,e){if(t=S(t),e=x(e,!0),t!==U||!a(D,e)||a(R,e)){var r=P(t,e);return!r||!a(D,e)||a(t,E)&&t[E][e]||(r.enumerable=!0),r}},et=function(t){var e,r=$(S(t)),n=[],i=0;while(r.length>i)a(D,e=r[i++])||e==E||e==c||n.push(e);return n},rt=function(t){var e,r=t===U,n=$(r?R:S(t)),i=[],s=0;while(n.length>s)!a(D,e=n[s++])||r&&!a(U,e)||i.push(D[e]);return i};H||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(r){this===U&&e.call(R,r),a(this,E)&&a(this[E],t)&&(this[E][t]=!1),Q(this,t,_(1,r))};return i&&K&&Q(U,t,{configurable:!0,set:e}),Y(t)},o(N[A],"toString",(function(){return this._k})),L.f=tt,j.f=B,r("9093").f=k.f=et,r("52a7").f=Z,C.f=rt,i&&!r("2d00")&&o(U,"propertyIsEnumerable",Z,!0),p.f=function(t){return Y(g(t))}),s(s.G+s.W+s.F*!H,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;nt.length>at;)g(nt[at++]);for(var it=I(g.store),st=0;it.length>st;)m(it[st++]);s(s.S+s.F*!H,"Symbol",{for:function(t){return a(T,t+="")?T[t]:T[t]=N(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in T)if(T[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),s(s.S+s.F*!H,"Object",{create:X,defineProperty:B,defineProperties:V,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var ot=u((function(){C.f(1)}));s(s.S+s.F*ot,"Object",{getOwnPropertySymbols:function(t){return C.f(w(t))}}),J&&s(s.S+s.F*(!H||u((function(){var t=N();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}))),"JSON",{stringify:function(t){var e,r,n=[t],a=1;while(arguments.length>a)n.push(arguments[a++]);if(r=e=n[1],(y(e)||void 0!==t)&&!q(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!q(e))return e}),n[1]=e,W.apply(J,n)}}),N[A][z]||r("32e9")(N[A],z,N[A].valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},ac4d:function(t,e,r){r("3a72")("asyncIterator")},b34e:function(t,e,r){"use strict";r("fa96")},d4c0:function(t,e,r){var n=r("0d58"),a=r("2621"),i=r("52a7");t.exports=function(t){var e=n(t),r=a.f;if(r){var s,o=r(t),c=i.f,u=0;while(o.length>u)c.call(t,s=o[u++])&&e.push(s)}return e}},fa96:function(t,e,r){}}]);
//# sourceMappingURL=chunk-25aecfa8.c83fdd77.js.map